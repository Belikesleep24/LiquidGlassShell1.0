<Window x:Class="LiquidGlassShell.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:LiquidGlassShell.ViewModels"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        mc:Ignorable="d"
        Title="LiquidGlassShell"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="Transparent"
        WindowState="Maximized"
        ShowInTaskbar="False"
        Topmost="False">

	<Window.DataContext>
		<vm:MainViewModel/>
	</Window.DataContext>

	<Window.Resources>
		<!-- LIQUID GLASS GRADIENTS & BLUR (APPLE HIG) -->
		<LinearGradientBrush x:Key="MenuBarGradient" StartPoint="0,0" EndPoint="0,1">
			<GradientStop Color="#A6FFFFFF" Offset="0"/>
			<GradientStop Color="#7EFFFFFF" Offset="0.5"/>
			<GradientStop Color="#52FFFFFF" Offset="1"/>
		</LinearGradientBrush>
		
		<LinearGradientBrush x:Key="DockGlassGradient" StartPoint="0,0" EndPoint="0,1">
			<GradientStop Color="#B8FFFFFF" Offset="0"/>
			<GradientStop Color="#85FFFFFF" Offset="0.5"/>
			<GradientStop Color="#4CFFFFFF" Offset="1"/>
		</LinearGradientBrush>
		
		<BlurEffect x:Key="GlassBlur" Radius="36" KernelType="Gaussian" RenderingBias="Quality"/>
		
		<!-- Estilo Menu Bar según Apple HIG con micro-animaciones -->
		<Style TargetType="Menu">
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="Foreground" Value="{StaticResource LabelPrimary}"/>
		</Style>
		
		<!-- Estilo MenuItem mejorado con micro-animaciones Apple -->
		<Style TargetType="MenuItem">
			<Setter Property="Foreground" Value="{StaticResource LabelPrimary}"/>
			<Setter Property="FontSize" Value="13"/>
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="Padding" Value="8,4"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="MenuItem">
						<Border x:Name="MenuItemBorder"
								Background="{TemplateBinding Background}"
								CornerRadius="6"
								Padding="{TemplateBinding Padding}"
								Opacity="1">
							<Border.RenderTransform>
								<ScaleTransform x:Name="MenuItemScale" ScaleX="1" ScaleY="1"/>
							</Border.RenderTransform>
							<ContentPresenter ContentSource="Header" 
											  HorizontalAlignment="Left"
											  VerticalAlignment="Center"
											  x:Name="ContentPresenter"/>
						</Border>
						<ControlTemplate.Triggers>
							<!-- Micro-animación hover según Apple HIG -->
							<Trigger Property="IsMouseOver" Value="True">
								<Trigger.EnterActions>
									<BeginStoryboard>
										<Storyboard>
											<DoubleAnimation Storyboard.TargetName="MenuItemBorder"
															Storyboard.TargetProperty="Background.(SolidColorBrush.Opacity)"
															To="0.25"
															Duration="0:0:0.15">
												<DoubleAnimation.EasingFunction>
													<CubicEase EasingMode="EaseOut"/>
												</DoubleAnimation.EasingFunction>
											</DoubleAnimation>
											<DoubleAnimation Storyboard.TargetName="MenuItemScale"
															Storyboard.TargetProperty="ScaleX"
															To="1.02"
															Duration="0:0:0.15">
												<DoubleAnimation.EasingFunction>
													<CubicEase EasingMode="EaseOut"/>
												</DoubleAnimation.EasingFunction>
											</DoubleAnimation>
											<DoubleAnimation Storyboard.TargetName="MenuItemScale"
															Storyboard.TargetProperty="ScaleY"
															To="1.02"
															Duration="0:0:0.15">
												<DoubleAnimation.EasingFunction>
													<CubicEase EasingMode="EaseOut"/>
												</DoubleAnimation.EasingFunction>
											</DoubleAnimation>
										</Storyboard>
									</BeginStoryboard>
								</Trigger.EnterActions>
								<Trigger.ExitActions>
									<BeginStoryboard>
										<Storyboard>
											<DoubleAnimation Storyboard.TargetName="MenuItemBorder"
															Storyboard.TargetProperty="Background.(SolidColorBrush.Opacity)"
															To="0"
															Duration="0:0:0.15">
												<DoubleAnimation.EasingFunction>
													<CubicEase EasingMode="EaseIn"/>
												</DoubleAnimation.EasingFunction>
											</DoubleAnimation>
											<DoubleAnimation Storyboard.TargetName="MenuItemScale"
															Storyboard.TargetProperty="ScaleX"
															To="1"
															Duration="0:0:0.15">
												<DoubleAnimation.EasingFunction>
													<CubicEase EasingMode="EaseIn"/>
												</DoubleAnimation.EasingFunction>
											</DoubleAnimation>
											<DoubleAnimation Storyboard.TargetName="MenuItemScale"
															Storyboard.TargetProperty="ScaleY"
															To="1"
															Duration="0:0:0.15">
												<DoubleAnimation.EasingFunction>
													<CubicEase EasingMode="EaseIn"/>
												</DoubleAnimation.EasingFunction>
											</DoubleAnimation>
										</Storyboard>
									</BeginStoryboard>
								</Trigger.ExitActions>
								<Setter TargetName="MenuItemBorder" Property="Background">
									<Setter.Value>
										<SolidColorBrush Color="#FFFFFF" Opacity="0.25"/>
									</Setter.Value>
								</Setter>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<Style x:Key="DockIconStyle" TargetType="Button">
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Setter Property="Width" Value="48"/>
			<Setter Property="Height" Value="48"/>
			<Setter Property="Margin" Value="6,0"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border x:Name="Border"
                                Background="Transparent"
                                CornerRadius="16"
                                RenderTransformOrigin="0.5,0.5">
							<Border.RenderTransform>
								<ScaleTransform x:Name="ScaleTransform"/>
							</Border.RenderTransform>

							<ContentPresenter x:Name="ContentPresenter"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Opacity="0.8"/>
						</Border>

						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Trigger.EnterActions>
									<BeginStoryboard>
										<Storyboard>
											<DoubleAnimation Storyboard.TargetName="ScaleTransform"
                                                             Storyboard.TargetProperty="ScaleX"
                                                             To="1.15"
                                                             Duration="0:0:0.15"/>
											<DoubleAnimation Storyboard.TargetName="ScaleTransform"
                                                             Storyboard.TargetProperty="ScaleY"
                                                             To="1.15"
                                                             Duration="0:0:0.15"/>
											<DoubleAnimation Storyboard.TargetName="ContentPresenter"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="1.0"
                                                             Duration="0:0:0.15"/>
										</Storyboard>
									</BeginStoryboard>
								</Trigger.EnterActions>

								<Trigger.ExitActions>
									<BeginStoryboard>
										<Storyboard>
											<DoubleAnimation Storyboard.TargetName="ScaleTransform"
                                                             Storyboard.TargetProperty="ScaleX"
                                                             To="1.0"
                                                             Duration="0:0:0.15"/>
											<DoubleAnimation Storyboard.TargetName="ScaleTransform"
                                                             Storyboard.TargetProperty="ScaleY"
                                                             To="1.0"
                                                             Duration="0:0:0.15"/>
											<DoubleAnimation Storyboard.TargetName="ContentPresenter"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="0.8"
                                                             Duration="0:0:0.15"/>
										</Storyboard>
									</BeginStoryboard>
								</Trigger.ExitActions>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</Window.Resources>

	<Grid>
		<!-- Fondo según Apple HIG -->
		<Rectangle x:Name="BackgroundRect"
                   Fill="{StaticResource SystemBackground}"
                   Opacity="0.98"/>

		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
				<RowDefinition Height="Auto"/>
			</Grid.RowDefinitions>

			<!-- Menu Bar LIQUID GLASS (MODIFICADO) -->
			<Border Grid.Row="0" 
					Height="28"
					VerticalAlignment="Top"
					BorderThickness="0"
					x:Name="MenuBarBorder"
					Background="Transparent">
				
				<Grid>
					<!-- Capa de vidrio líquido con blur -->
					<Border Background="{StaticResource MenuBarGradient}"
							Effect="{StaticResource GlassBlur}"
							CornerRadius="0"
							Opacity="0.9"/>
					
					<!-- Overlay sutil -->
					<Border Background="Transparent" Opacity="0.02"/>
					
					<!-- Contenido del menú encima del vidrio -->
					<Menu Background="Transparent"
						  Foreground="{StaticResource LabelPrimary}"
						  FontSize="13"
						  Height="28"
						  VerticalAlignment="Center">
						
						<!-- App Menu - LiquidGlassShell (en negrita) -->
						<MenuItem Header="LiquidGlassShell" FontWeight="Bold">
							<MenuItem Header="About LiquidGlassShell" Click="AboutMenuItem_Click"/>
							<Separator/>
							<MenuItem Header="Settings…" Click="SettingsMenuItem_Click" InputGestureText="Ctrl+,"/>
							<Separator/>
							<MenuItem Header="Hide LiquidGlassShell" InputGestureText="Ctrl+H"/>
							<MenuItem Header="Hide Others" InputGestureText="Ctrl+Alt+H"/>
							<MenuItem Header="Show All"/>
							<Separator/>
							<MenuItem Header="Quit LiquidGlassShell" Click="QuitMenuItem_Click" InputGestureText="Ctrl+Q"/>
						</MenuItem>
						
						<!-- File Menu -->
						<MenuItem Header="File">
							<MenuItem Header="New Window" InputGestureText="Ctrl+N"/>
							<MenuItem Header="Open…" InputGestureText="Ctrl+O"/>
							<MenuItem Header="Open Recent">
								<MenuItem Header="Clear Menu"/>
							</MenuItem>
							<Separator/>
							<MenuItem Header="Close" InputGestureText="Ctrl+W"/>
							<MenuItem Header="Close Tab" InputGestureText="Ctrl+W"/>
							<Separator/>
							<MenuItem Header="Save" InputGestureText="Ctrl+S"/>
							<MenuItem Header="Save All" InputGestureText="Ctrl+Alt+S"/>
							<MenuItem Header="Duplicate" InputGestureText="Ctrl+D"/>
							<MenuItem Header="Rename…"/>
							<Separator/>
							<MenuItem Header="Move To…"/>
							<MenuItem Header="Export As…"/>
							<Separator/>
							<MenuItem Header="Page Setup…" InputGestureText="Ctrl+Alt+P"/>
							<MenuItem Header="Print…" InputGestureText="Ctrl+P"/>
						</MenuItem>
						
						<!-- Edit Menu -->
						<MenuItem Header="Edit">
							<MenuItem Header="Undo" InputGestureText="Ctrl+Z"/>
							<MenuItem Header="Redo" InputGestureText="Ctrl+Y"/>
							<Separator/>
							<MenuItem Header="Cut" InputGestureText="Ctrl+X"/>
							<MenuItem Header="Copy" InputGestureText="Ctrl+C"/>
							<MenuItem Header="Paste" InputGestureText="Ctrl+V"/>
							<MenuItem Header="Paste and Match Style" InputGestureText="Ctrl+Alt+V"/>
							<MenuItem Header="Delete"/>
							<Separator/>
							<MenuItem Header="Select All" InputGestureText="Ctrl+A"/>
							<Separator/>
							<MenuItem Header="Find">
								<MenuItem Header="Find…" InputGestureText="Ctrl+F"/>
								<MenuItem Header="Find and Replace…" InputGestureText="Ctrl+H"/>
								<MenuItem Header="Find Next" InputGestureText="F3"/>
								<MenuItem Header="Find Previous" InputGestureText="Shift+F3"/>
								<MenuItem Header="Use Selection for Find" InputGestureText="Ctrl+E"/>
								<MenuItem Header="Jump to Selection" InputGestureText="Ctrl+J"/>
							</MenuItem>
							<MenuItem Header="Spelling and Grammar">
								<MenuItem Header="Show Spelling and Grammar" InputGestureText="Ctrl+:"/>
								<MenuItem Header="Check Document Now" InputGestureText="F7"/>
								<MenuItem Header="Check Spelling While Typing" IsCheckable="True" IsChecked="True"/>
								<MenuItem Header="Check Grammar With Spelling" IsCheckable="True" IsChecked="True"/>
								<MenuItem Header="Correct Spelling Automatically" IsCheckable="True"/>
							</MenuItem>
							<MenuItem Header="Substitutions">
								<MenuItem Header="Show Substitutions"/>
								<MenuItem Header="Smart Copy/Paste" IsCheckable="True" IsChecked="True"/>
								<MenuItem Header="Smart Quotes" IsCheckable="True" IsChecked="True"/>
								<MenuItem Header="Smart Dashes" IsCheckable="True" IsChecked="True"/>
								<MenuItem Header="Smart Links" IsCheckable="True" IsChecked="True"/>
								<MenuItem Header="Data Detectors" IsCheckable="True" IsChecked="True"/>
								<MenuItem Header="Text Replacement" IsCheckable="True" IsChecked="True"/>
							</MenuItem>
							<MenuItem Header="Transformations">
								<MenuItem Header="Make Uppercase" InputGestureText="Ctrl+Alt+U"/>
								<MenuItem Header="Make Lowercase" InputGestureText="Ctrl+Alt+L"/>
								<MenuItem Header="Capitalize" InputGestureText="Ctrl+Alt+C"/>
							</MenuItem>
							<MenuItem Header="Speech">
								<MenuItem Header="Start Speaking"/>
								<MenuItem Header="Stop Speaking"/>
							</MenuItem>
							<Separator/>
							<MenuItem Header="Start Dictation" InputGestureText="Ctrl+Alt+D"/>
							<MenuItem Header="Emoji &amp; Symbols" InputGestureText="Ctrl+Alt+Space"/>
						</MenuItem>
						
						<!-- Format Menu -->
						<MenuItem Header="Format">
							<MenuItem Header="Font">
								<MenuItem Header="Show Fonts" InputGestureText="Ctrl+T"/>
								<MenuItem Header="Bold" InputGestureText="Ctrl+B"/>
								<MenuItem Header="Italic" InputGestureText="Ctrl+I"/>
								<MenuItem Header="Underline" InputGestureText="Ctrl+U"/>
								<Separator/>
								<MenuItem Header="Bigger" InputGestureText="Ctrl++"/>
								<MenuItem Header="Smaller" InputGestureText="Ctrl+-"/>
								<Separator/>
								<MenuItem Header="Show Colors" InputGestureText="Ctrl+Shift+C"/>
								<Separator/>
								<MenuItem Header="Copy Style" InputGestureText="Ctrl+Alt+C"/>
								<MenuItem Header="Paste Style" InputGestureText="Ctrl+Alt+V"/>
							</MenuItem>
							<MenuItem Header="Text">
								<MenuItem Header="Align Left" InputGestureText="Ctrl+{"/>
								<MenuItem Header="Align Center" InputGestureText="Ctrl+|"/>
								<MenuItem Header="Justify" InputGestureText="Ctrl+}"/>
								<MenuItem Header="Align Right"/>
								<Separator/>
								<MenuItem Header="Writing Direction"/>
								<Separator/>
								<MenuItem Header="Show Ruler" InputGestureText="Ctrl+R"/>
								<MenuItem Header="Copy Ruler"/>
								<MenuItem Header="Paste Ruler"/>
							</MenuItem>
						</MenuItem>
						
						<!-- View Menu -->
						<MenuItem Header="View">
							<MenuItem Header="Show/Hide Tab Bar" IsCheckable="True"/>
							<MenuItem Header="Show All Tabs" InputGestureText="Ctrl+Alt+T"/>
							<Separator/>
							<MenuItem Header="Show/Hide Toolbar" IsCheckable="True" IsChecked="True"/>
							<MenuItem Header="Customize Toolbar…"/>
							<Separator/>
							<MenuItem Header="Show/Hide Sidebar" IsCheckable="True" IsChecked="True" InputGestureText="Ctrl+Alt+S"/>
							<Separator/>
							<MenuItem Header="Enter Full Screen" InputGestureText="F11"/>
						</MenuItem>
						
						<!-- Wallpaper Menu -->
						<MenuItem Header="Wallpaper">
							<MenuItem Header="Change Wallpaper…" Click="ChangeWallpaperMenuItem_Click"/>
							<Separator/>
							<MenuItem Header="Wallpaper Gallery…" Click="WallpaperGalleryMenuItem_Click"/>
						</MenuItem>
						
						<!-- Window Menu -->
						<MenuItem Header="Window">
							<MenuItem Header="Minimize" InputGestureText="Ctrl+M"/>
							<MenuItem Header="Zoom"/>
							<Separator/>
							<MenuItem Header="Show Previous Tab" InputGestureText="Ctrl+Shift+Tab"/>
							<MenuItem Header="Show Next Tab" InputGestureText="Ctrl+Tab"/>
							<MenuItem Header="Move Tab to New Window"/>
							<MenuItem Header="Merge All Windows"/>
							<Separator/>
							<MenuItem Header="Bring All to Front"/>
						</MenuItem>
						
						<!-- Help Menu -->
						<MenuItem Header="Help">
							<MenuItem Header="LiquidGlassShell Help" InputGestureText="F1"/>
							<Separator/>
							<MenuItem Header="Keyboard Shortcuts" Click="ShowShortcutsMenuItem_Click"/>
						</MenuItem>
					</Menu>
				</Grid>
			</Border>

			<!-- Reloj Digital según Apple HIG con micro-animaciones fluidas -->
			<Grid Grid.Row="1">
				<StackPanel VerticalAlignment="Center" 
							HorizontalAlignment="Center">
					<!-- Hora - Estilo Apple con animación suave -->
					<TextBlock x:Name="TimeTextBlock"
							   Text="00:00:00"
							   FontSize="96"
							   FontWeight="Bold"
							   Foreground="{StaticResource LabelPrimary}"
							   HorizontalAlignment="Center"
							   Margin="0,0,0,16"
							   Opacity="0"
							   RenderTransformOrigin="0.5,0.5">
						<TextBlock.RenderTransform>
							<TransformGroup>
								<ScaleTransform x:Name="TimeScale" ScaleX="0.85" ScaleY="0.85"/>
								<TranslateTransform x:Name="TimeTranslate" Y="-20"/>
							</TransformGroup>
						</TextBlock.RenderTransform>
						<TextBlock.Triggers>
							<EventTrigger RoutedEvent="Loaded">
								<BeginStoryboard>
									<Storyboard>
										<!-- Fade in suave -->
										<DoubleAnimation Storyboard.TargetName="TimeTextBlock"
														Storyboard.TargetProperty="Opacity"
														To="1"
														Duration="0:0:0.8">
											<DoubleAnimation.EasingFunction>
												<StaticResource ResourceKey="EaseOut"/>
											</DoubleAnimation.EasingFunction>
										</DoubleAnimation>
										<!-- Scale animation -->
										<DoubleAnimation Storyboard.TargetName="TimeScale"
														Storyboard.TargetProperty="ScaleX"
														To="1"
														Duration="0:0:0.8">
											<DoubleAnimation.EasingFunction>
												<StaticResource ResourceKey="EaseOut"/>
											</DoubleAnimation.EasingFunction>
										</DoubleAnimation>
										<DoubleAnimation Storyboard.TargetName="TimeScale"
														Storyboard.TargetProperty="ScaleY"
														To="1"
														Duration="0:0:0.8">
											<DoubleAnimation.EasingFunction>
												<StaticResource ResourceKey="EaseOut"/>
											</DoubleAnimation.EasingFunction>
										</DoubleAnimation>
										<!-- Translate animation -->
										<DoubleAnimation Storyboard.TargetName="TimeTranslate"
														Storyboard.TargetProperty="Y"
														To="0"
														Duration="0:0:0.8">
											<DoubleAnimation.EasingFunction>
												<StaticResource ResourceKey="EaseOut"/>
											</DoubleAnimation.EasingFunction>
										</DoubleAnimation>
									</Storyboard>
								</BeginStoryboard>
							</EventTrigger>
						</TextBlock.Triggers>
					</TextBlock>
					
					<!-- Fecha - Estilo Apple con delay -->
					<TextBlock x:Name="DateTextBlock"
							   Text="Lunes, 1 de Enero"
							   FontSize="24"
							   FontWeight="Regular"
							   Foreground="{StaticResource LabelSecondary}"
							   HorizontalAlignment="Center"
							   Opacity="0"
							   RenderTransformOrigin="0.5,0.5">
						<TextBlock.RenderTransform>
							<TranslateTransform x:Name="DateTranslate" Y="10"/>
						</TextBlock.RenderTransform>
						<TextBlock.Triggers>
							<EventTrigger RoutedEvent="Loaded">
								<BeginStoryboard>
									<Storyboard>
										<DoubleAnimation Storyboard.TargetName="DateTextBlock"
														Storyboard.TargetProperty="Opacity"
														To="1"
														Duration="0:0:0.6"
														BeginTime="0:0:0.3">
											<DoubleAnimation.EasingFunction>
												<StaticResource ResourceKey="EaseOut"/>
											</DoubleAnimation.EasingFunction>
										</DoubleAnimation>
										<DoubleAnimation Storyboard.TargetName="DateTranslate"
														Storyboard.TargetProperty="Y"
														To="0"
														Duration="0:0:0.6"
														BeginTime="0:0:0.3">
											<DoubleAnimation.EasingFunction>
												<StaticResource ResourceKey="EaseOut"/>
											</DoubleAnimation.EasingFunction>
										</DoubleAnimation>
									</Storyboard>
								</BeginStoryboard>
							</EventTrigger>
						</TextBlock.Triggers>
					</TextBlock>
				</StackPanel>
			</Grid>

			<!-- Dock estilo macOS LIQUID GLASS (MODIFICADO) -->
			<Grid Grid.Row="2" x:Name="TaskbarGrid">
				<Grid.Triggers>
					<EventTrigger RoutedEvent="MouseEnter">
						<BeginStoryboard>
							<Storyboard>
								<DoubleAnimation Storyboard.TargetName="TaskbarGrid"
												Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
												To="0"
												Duration="0:0:0.3">
									<DoubleAnimation.EasingFunction>
										<CubicEase EasingMode="EaseOut"/>
									</DoubleAnimation.EasingFunction>
								</DoubleAnimation>
								<DoubleAnimation Storyboard.TargetName="DockGlassBorder"
												Storyboard.TargetProperty="Opacity"
												To="1"
												Duration="0:0:0.25"/>
							</Storyboard>
						</BeginStoryboard>
					</EventTrigger>
					<EventTrigger RoutedEvent="MouseLeave">
						<BeginStoryboard>
							<Storyboard>
								<DoubleAnimation Storyboard.TargetName="TaskbarGrid"
												Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
												To="72"
												Duration="0:0:0.4">
									<DoubleAnimation.EasingFunction>
										<CubicEase EasingMode="EaseIn"/>
									</DoubleAnimation.EasingFunction>
								</DoubleAnimation>
								<DoubleAnimation Storyboard.TargetName="DockGlassBorder"
												Storyboard.TargetProperty="Opacity"
												To="0.9"
												Duration="0:0:0.35"/>
							</Storyboard>
						</BeginStoryboard>
					</EventTrigger>
				</Grid.Triggers>
				<Grid.RenderTransform>
					<TranslateTransform Y="72"/>
				</Grid.RenderTransform>
				
				<!-- Área de detección para auto-hide (según HIG: 8-10px) -->
				<Rectangle Height="10"
						   VerticalAlignment="Bottom"
						   Fill="Transparent"
						   Margin="0,0,0,-10"
						   Cursor="Hand"/>
				
				<!-- Sombra sutil hacia arriba (Apple style) -->
				<Border Height="74"
						CornerRadius="14,14,0,0"
						VerticalAlignment="Bottom"
						Margin="0,0,0,-1"
						Background="#10000000"
						Opacity="0.3"/>
				
				<!-- Fondo principal LIQUID GLASS REAL (MODIFICADO) -->
				<Border Height="55"
						CornerRadius="14,14,0,0"
						VerticalAlignment="Bottom"
						Margin="0,0,0,0"
						ClipToBounds="True"
						x:Name="DockGlassBorder"
						Opacity="0.9"
						Background="Transparent">
					
					<Grid>
						<!-- Capa de vidrio líquido con blur -->
						<Border Background="{StaticResource DockGlassGradient}"
								Effect="{StaticResource GlassBlur}"
								CornerRadius="14,14,0,0"
								Opacity="0.85"/>
						
						<!-- Overlay sutil para mayor claridad -->
						<Border Background="Transparent" Opacity="0.01"/>
						
						<!-- Contenido del dock encima del vidrio -->
						<Border Height="55"
								CornerRadius="14,14,0,0"
								VerticalAlignment="Bottom"
								Padding="12,8"
								Background="Transparent"
								x:Name="DockContentBorder">
							<Grid>
								<!-- Items del Dock según Apple HIG -->
								<ItemsControl ItemsSource="{Binding TaskbarItems}">
									<ItemsControl.ItemsPanel>
										<ItemsPanelTemplate>
											<StackPanel Orientation="Horizontal"
														HorizontalAlignment="Center"
														VerticalAlignment="Center"/>
										</ItemsPanelTemplate>
									</ItemsControl.ItemsPanel>

									<ItemsControl.ItemTemplate>
										<DataTemplate>
											<Button Command="{Binding DataContext.TaskbarItemCommand, RelativeSource={RelativeSource AncestorType=Window}}"
													CommandParameter="{Binding}"
													ToolTip="{Binding Name}"
													Background="Transparent"
													BorderThickness="0"
													Cursor="Hand"
													Padding="0"
													Margin="4,0">
												<Button.Template>
													<ControlTemplate TargetType="Button">
														<Grid>
															<!-- Contenedor del icono según especificaciones Apple -->
															<Border x:Name="DockIconBorder"
																	Width="64"
																	Height="64"
																	CornerRadius="12"
																	Cursor="Hand"
																	RenderTransformOrigin="0.5,1"
																	Background="Transparent">
																
																<Border.RenderTransform>
																	<TransformGroup>
																		<ScaleTransform x:Name="iconScale" />
																		<TranslateTransform x:Name="iconTranslate" />
																	</TransformGroup>
																</Border.RenderTransform>

																<Border.Triggers>
																	<!-- Animación hover según Apple HIG (0.25s, easing natural) -->
																	<EventTrigger RoutedEvent="MouseEnter">
																		<BeginStoryboard>
																			<Storyboard>
																				<DoubleAnimation Storyboard.TargetName="iconScale"
																								Storyboard.TargetProperty="ScaleX"
																								To="1.25"
																								Duration="0:0:0.25">
																					<DoubleAnimation.EasingFunction>
																						<CubicEase EasingMode="EaseOut"/>
																					</DoubleAnimation.EasingFunction>
																				</DoubleAnimation>
																				<DoubleAnimation Storyboard.TargetName="iconScale"
																								Storyboard.TargetProperty="ScaleY"
																								To="1.25"
																								Duration="0:0:0.25">
																					<DoubleAnimation.EasingFunction>
																						<CubicEase EasingMode="EaseOut"/>
																					</DoubleAnimation.EasingFunction>
																				</DoubleAnimation>
																				<DoubleAnimation Storyboard.TargetName="iconTranslate"
																								Storyboard.TargetProperty="Y"
																								To="-8"
																								Duration="0:0:0.25">
																					<DoubleAnimation.EasingFunction>
																						<CubicEase EasingMode="EaseOut"/>
																					</DoubleAnimation.EasingFunction>
																				</DoubleAnimation>
																			</Storyboard>
																		</BeginStoryboard>
																	</EventTrigger>

																	<EventTrigger RoutedEvent="MouseLeave">
																		<BeginStoryboard>
																			<Storyboard>
																				<DoubleAnimation Storyboard.TargetName="iconScale"
																								Storyboard.TargetProperty="ScaleX"
																								To="1"
																								Duration="0:0:0.3">
																					<DoubleAnimation.EasingFunction>
																						<CubicEase EasingMode="EaseIn"/>
																					</DoubleAnimation.EasingFunction>
																				</DoubleAnimation>
																				<DoubleAnimation Storyboard.TargetName="iconScale"
																								Storyboard.TargetProperty="ScaleY"
																								To="1"
																								Duration="0:0:0.3">
																					<DoubleAnimation.EasingFunction>
																						<CubicEase EasingMode="EaseIn"/>
																					</DoubleAnimation.EasingFunction>
																				</DoubleAnimation>
																				<DoubleAnimation Storyboard.TargetName="iconTranslate"
																								Storyboard.TargetProperty="Y"
																								To="0"
																								Duration="0:0:0.3">
																					<DoubleAnimation.EasingFunction>
																						<CubicEase EasingMode="EaseIn"/>
																					</DoubleAnimation.EasingFunction>
																				</DoubleAnimation>
																			</Storyboard>
																		</BeginStoryboard>
																	</EventTrigger>
																</Border.Triggers>

																<!-- Icono según especificaciones Apple (64x64px) -->
																<Grid>
																	<Image Source="{Binding IconPath}"
																		   Width="64"
																		   Height="64"
																		   Stretch="Uniform"
																		   RenderOptions.BitmapScalingMode="HighQuality"
																		   HorizontalAlignment="Center"
																		   VerticalAlignment="Center">
																		<Image.Style>
																			<Style TargetType="Image">
																				<Setter Property="Visibility" Value="Visible"/>
																				<Style.Triggers>
																					<DataTrigger Binding="{Binding IconPath}" Value="">
																						<Setter Property="Visibility" Value="Collapsed"/>
																					</DataTrigger>
																				</Style.Triggers>
																			</Style>
																		</Image.Style>
																	</Image>
																	
																	<!-- Texto fallback (Apple HIG: tipografía SF Pro, 11-12px) -->
																	<TextBlock Text="{Binding Name}"
																		   FontSize="11"
																		   FontWeight="Regular"
																		   Foreground="#FFFFFF"
																		   HorizontalAlignment="Center"
																		   VerticalAlignment="Center"
																		   TextWrapping="Wrap"
																		   TextAlignment="Center"
																		   MaxWidth="60">
																		<TextBlock.Style>
																			<Style TargetType="TextBlock">
																				<Setter Property="Visibility" Value="Collapsed"/>
																				<Style.Triggers>
																					<DataTrigger Binding="{Binding IconPath}" Value="">
																						<Setter Property="Visibility" Value="Visible"/>
																					</DataTrigger>
																				</Style.Triggers>
																			</Style>
																		</TextBlock.Style>
																	</TextBlock>
																</Grid>
															</Border>
															
															<!-- Indicador de app en ejecución (Apple style: punto debajo) -->
															<Ellipse x:Name="RunningIndicator"
																	Width="3"
																	Height="3"
																	Fill="#FFFFFF"
																	HorizontalAlignment="Center"
																	VerticalAlignment="Bottom"
																	Margin="0,0,0,2"
																	Opacity="0">
																<Ellipse.Effect>
																	<DropShadowEffect Color="#FFFFFF" BlurRadius="2" Opacity="0.6"/>
																</Ellipse.Effect>
															</Ellipse>
														</Grid>
														
														<!-- Triggers según Apple HIG -->
														<ControlTemplate.Triggers>
															<DataTrigger Binding="{Binding IsRunning}" Value="True">
																<Setter TargetName="RunningIndicator" Property="Opacity" Value="0.9"/>
															</DataTrigger>
															<DataTrigger Binding="{Binding WindowCount}" Value="2">
																<Setter TargetName="RunningIndicator" Property="Fill" Value="#FFD700"/>
																<Setter TargetName="RunningIndicator" Property="Width" Value="4"/>
																<Setter TargetName="RunningIndicator" Property="Height" Value="4"/>
															</DataTrigger>
														</ControlTemplate.Triggers>
													</ControlTemplate>
												</Button.Template>
											</Button>
										</DataTemplate>
									</ItemsControl.ItemTemplate>
								</ItemsControl>
								
								<!-- Fallback: Mostrar DockItems si no hay TaskbarItems -->
								<ItemsControl ItemsSource="{Binding DockItems}"
											  Visibility="Collapsed"
											  x:Name="DockItemsFallback">
									<ItemsControl.Style>
										<Style TargetType="ItemsControl">
											<Setter Property="Visibility" Value="Collapsed"/>
											<Style.Triggers>
												<DataTrigger Binding="{Binding TaskbarItems.Count, RelativeSource={RelativeSource AncestorType=Window}}" Value="0">
													<Setter Property="Visibility" Value="Visible"/>
												</DataTrigger>
											</Style.Triggers>
										</Style>
									</ItemsControl.Style>
								</ItemsControl>
							</Grid>
						</Border>
					</Grid>
				</Border>
			</Grid>
		</Grid>
	</Grid>
</Window>